# 專案更新說明

## 最新更新（2025-10-10）

### ✨ 線性迴歸功能大幅改進

基於使用者回饋，我們將線性迴歸展示從複雜的糖尿病資料集改為更直觀的加州房價資料集，並新增了互動式預測功能！

---

## 更新內容

### 1. 資料集變更 🏠

**之前**：糖尿病資料集（10 個特徵，較複雜）
**現在**：加州房價資料集（單一特徵：平均房間數）

**優點**：
- ✅ 更容易理解（房間數 → 房價）
- ✅ 只有一個特徵，視覺化更清晰
- ✅ 日常生活相關，更有代入感
- ✅ 200 筆精選資料，展示效果更好

### 2. 新增互動式預測功能 ⭐

#### 功能 1：輸入預測
- 在「房價預測器」面板輸入房間數（1-15 間）
- 點擊「預測房價」按鈕
- 立即顯示預測結果（萬美元）
- 圖表上會出現金色星星標記您的預測點

#### 功能 2：點擊預測
- 直接點擊圖表上的任一資料點
- 系統自動填入該資料點的房間數
- 自動執行預測並顯示結果
- tooltip 提示：「💡 點擊可預測此資料點」

#### 功能 3：公式顯示
- 顯示完整的預測公式
- 例如：`房價 = 3.85 × 房間數 + 7.46`
- 清楚看到係數和截距

### 3. 新增 API 端點 🔌

#### `/api/regression/predict`

**用途**：根據房間數預測房價

**參數**：
- `rooms`（必填）：房間數量（浮點數）

**回應範例**：
```json
{
  "success": true,
  "input": {
    "rooms": 6.0,
    "unit": "間"
  },
  "prediction": {
    "price": 30.56,
    "unit": "萬美元"
  },
  "formula": {
    "coefficient": 3.85,
    "intercept": 7.46,
    "equation": "房價 = 3.85 × 房間數 + 7.46"
  }
}
```

**使用方式**：
```bash
curl "http://127.0.0.1:5000/api/regression/predict?rooms=6"
```

### 4. UI/UX 改進 🎨

#### 新增預測面板
- 漸層紫色背景，視覺突出
- 大字體顯示預測結果
- 金色強調預測價格
- 公式以等寬字體顯示

#### 圖表互動增強
- 點擊資料點自動預測
- 預測點使用金色星星標記
- 更清楚的 tooltip 提示
- 更新 X/Y 軸標籤（含單位）

#### 資訊卡片優化
- 黃色高亮提示互動方式
- 更新資料集說明文字
- 清楚說明使用方法

---

## 程式碼變更

### 後端 (app.py)

1. **資料集更換**
   ```python
   # 舊版：from sklearn.datasets import load_diabetes
   # 新版：
   from sklearn.datasets import fetch_california_housing
   ```

2. **簡化資料**
   - 只使用 200 筆資料（展示用）
   - 只使用單一特徵（平均房間數）
   - 房價轉換為萬美元（更易理解）

3. **新增預測 API**
   ```python
   @app.route("/api/regression/predict")
   def regression_predict():
       # 接收房間數參數
       # 訓練模型
       # 返回預測結果
   ```

### 前端 (regression.html)

1. **新增預測面板**
   ```html
   <div class="prediction-panel">
     <h3>🏠 房價預測器</h3>
     <!-- 輸入框 + 預測按鈕 -->
     <!-- 結果顯示區 -->
   </div>
   ```

2. **移除特徵選擇器**
   - 因為現在只有單一特徵，不需要選擇

### 前端 (regression.js)

1. **新增預測函式**
   ```javascript
   async function predictPrice(rooms) {
     // 呼叫預測 API
     // 更新顯示結果
     // 在圖表上標記預測點
   }
   ```

2. **新增點擊事件**
   ```javascript
   onClick: function(evt, activeElements) {
     // 點擊資料點時
     // 自動填入房間數
     // 執行預測
   }
   ```

3. **新增星星標記**
   ```javascript
   function addPredictionPoint(x, y) {
     // 移除舊預測點
     // 新增金色星星標記
     // 更新圖表
   }
   ```

### 樣式 (regression.css)

1. **新增預測面板樣式**
   - 漸層背景
   - 輸入框樣式
   - 按鈕動畫
   - 結果顯示區

2. **新增高亮提示樣式**
   - 黃色背景漸層
   - 左側邊框強調

---

## 使用說明

### 方法 1：輸入預測

1. 在「房價預測器」面板找到輸入框
2. 輸入房間數（例如：6.5）
3. 點擊「預測房價」或按 Enter
4. 查看預測結果和圖表上的星星標記

### 方法 2：點擊預測

1. 在圖表上點擊任一藍色或粉紅色資料點
2. 系統自動填入該點的房間數
3. 自動執行預測並顯示結果
4. 圖表上出現金色星星標記

### 觀察重點

- **迴歸線**：黃色直線代表模型學到的線性關係
- **藍色圓點**：訓練資料
- **粉紅色圓點**：測試資料
- **金色星星**：您的預測點
- **R² 分數**：模型擬合度（越接近 1 越好）

---

## 技術優勢

1. **更直觀的學習體驗**
   - 從複雜的多特徵迴歸簡化為單特徵
   - 使用者可以立即理解「更多房間 = 更高房價」

2. **互動性大幅提升**
   - 從被動觀看到主動預測
   - 點擊圖表即可互動
   - 即時視覺回饋

3. **實用性更強**
   - 房價預測是實際應用場景
   - 可以嘗試不同房間數的影響
   - 清楚看到線性關係

4. **教學效果更好**
   - 一個特徵更容易理解線性迴歸原理
   - 視覺化更清晰
   - 公式顯示幫助理解計算過程

---

## 相容性說明

- ✅ 舊版 API `/api/regression/data` 仍然可用
- ✅ 新版相容所有現代瀏覽器
- ✅ 響應式設計支援手機/平板
- ✅ 無需額外安裝套件

---

## 測試建議

### 測試案例 1：基本預測
- 輸入：5.0 間
- 預期結果：約 26.71 萬美元

### 測試案例 2：極端值
- 輸入：1.0 間
- 預期結果：約 11.31 萬美元

- 輸入：10.0 間
- 預期結果：約 45.96 萬美元

### 測試案例 3：點擊預測
- 點擊圖表上的任一點
- 預期：輸入框自動更新，顯示預測結果

---

## 後續計畫

- [ ] 加入多房型比較功能
- [ ] 支援匯出預測結果
- [ ] 加入歷史預測記錄
- [ ] 支援批次預測（上傳 CSV）

---

## 回饋與建議

如果您有任何建議或發現問題，歡迎回饋！

**更新日期**：2025-10-10
**版本**：v2.0
**貢獻者**：Claude Code
